# Cloudflare Workers configuration for ICF MCP Server
# WHO ICF (International Classification of Functioning, Disability and Health)

name = "icf-mcp-server"
main = "src/index.ts"
compatibility_date = "2025-01-13"
compatibility_flags = ["nodejs_compat"]

# Migration to remove old Durable Object
[[migrations]]
tag = "v2"
deleted_classes = ["MyMCP"]

# Environment variables
# Set secrets via: wrangler secret put WHO_CLIENT_ID
#                  wrangler secret put WHO_CLIENT_SECRET
[vars]
WHO_API_RELEASE = "2025-01"
WHO_API_LANGUAGE = "en"

# Development environment
[env.dev]
name = "icf-mcp-server-dev"

# Production environment with custom domain
[env.production]
name = "icf-mcp-server"
vars = { WHO_API_RELEASE = "2025-01", WHO_API_LANGUAGE = "en" }
routes = [
  { pattern = "mcp-icf.medseal.app", custom_domain = true }
]
